<!-- 
  This file is automatically imported by NuGet into a user's project
  when it targets a single framework, or in classic (pre 2017) csproj projects.
-->
<Project TreatAsLocalProperty="SciterCorePackFolderTaskFolder;SciterCorePackFolderTaskAssembly">
  
  <PropertyGroup>
    <SciterCorePackFolderTaskFolder>$(MSBuildThisFileDirectory)..\..\scripts\</SciterCorePackFolderTaskFolder>
    <SciterCorePackFolderTaskAssembly Condition="$([MSBuild]::IsOsPlatform(Windows))">packfolder.exe</SciterCorePackFolderTaskAssembly>
    <SciterCorePackFolderTaskAssembly Condition="$([MSBuild]::IsOsPlatform(OSX))">packOSX.sh</SciterCorePackFolderTaskAssembly>
    <SciterCorePackFolderTaskAssembly Condition="$([MSBuild]::IsOsPlatform(Linux))">packOSX.sh</SciterCorePackFolderTaskAssembly>
  </PropertyGroup>
  
  <Target Name="SciterCorePackFolderPreBuild" BeforeTargets="PreBuildEvent" >
    <MakeDir Directories="$(ProjectDir).sciter" />
    <Exec Command="$(SciterCorePackFolderTaskFolder)$(SciterCorePackFolderTaskAssembly) &quot;$(ProjectDir)res&quot; &quot;$(ProjectDir).sciter\$(ProjectName).bin&quot; -binary" />
  </Target>

  <Target Name="SciterCorePackFolderEmbedLocal" BeforeTargets="PrepareForBuild">
    <ItemGroup>
      <EmbeddedResource Include="$(ProjectDir).sciter\$(ProjectName).bin">
        <LogicalName>SciterResource</LogicalName>
      </EmbeddedResource>
    </ItemGroup>
  </Target>
  
</Project>
